<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VerificaciÃ³n de ImÃ¡genes - Eunomia CMS</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .image-preview { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .image-preview img { max-width: 300px; height: auto; margin: 10px; border: 1px solid #ccc; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>ğŸ­ VerificaciÃ³n del Sistema de ImÃ¡genes - Eunomia CMS</h1>
    
    <div class="status success">
        âœ… <strong>Sistema Funcionando:</strong> Las imÃ¡genes se estÃ¡n subiendo y guardando correctamente
    </div>

    <div class="status info">
        ğŸ“ <strong>Estructura de Almacenamiento:</strong> storage/app/public/images/{tipo_contenido}/{tipo_imagen}/
    </div>

    <h2>ğŸ“¸ ImÃ¡genes Subidas Recientemente</h2>
    
    <div class="image-preview">
        <h3>Imagen Principal de Noticia</h3>
        <p><strong>Archivo:</strong> content_8_16nov08_1762439838_TTKTf1.jpg</p>
        <p><strong>Ruta:</strong> images/noticia/imagen/</p>
        <img src="/storage/images/noticia/imagen/content_8_16nov08_1762439838_TTKTf1.jpg" alt="Imagen Principal" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display: none; color: red;">âŒ Error cargando imagen - verificar symlink storage</div>
    </div>

    <div class="image-preview">
        <h3>Imagen de Portada de Noticia</h3>
        <p><strong>Archivo:</strong> content_8_20080318-09-sisebuto-y-fallera-valencia_1762439838_9BXbYq.JPG</p>
        <p><strong>Ruta:</strong> images/noticia/imagen_portada/</p>
        <img src="/storage/images/noticia/imagen_portada/content_8_20080318-09-sisebuto-y-fallera-valencia_1762439838_9BXbYq.JPG" alt="Imagen de Portada" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display: none; color: red;">âŒ Error cargando imagen - verificar symlink storage</div>
    </div>

    <h2>ğŸ”— Enlaces de Prueba</h2>
    <ul>
        <li><a href="/admin/contents" target="_blank">ğŸ“‹ Lista de Contenidos (Admin)</a></li>
        <li><a href="/admin/contents/create" target="_blank">â• Crear Nuevo Contenido</a></li>
        <li><a href="/admin/image-configs" target="_blank">âš™ï¸ ConfiguraciÃ³n de ImÃ¡genes</a></li>
        <li><a href="/admin/dashboard" target="_blank">ğŸ  Dashboard Admin</a></li>
    </ul>

    <h2>ğŸ“Š InformaciÃ³n del Sistema</h2>
    <ul>
        <li><strong>ExtensiÃ³n GD:</strong> <?= extension_loaded('gd') ? 'âœ… Instalada' : 'âš ï¸ No disponible (modo fallback)' ?></li>
        <li><strong>Storage Link:</strong> <?= is_link(public_path('storage')) ? 'âœ… Configurado' : 'âŒ Falta symlink' ?></li>
        <li><strong>Directorio de ImÃ¡genes:</strong> <?= is_dir(storage_path('app/public/images')) ? 'âœ… Existe' : 'âŒ No existe' ?></li>
    </ul>

    <script>
        // Verificar imÃ¡genes cargadas
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('img');
            let loadedCount = 0;
            
            images.forEach(img => {
                img.onload = function() { loadedCount++; };
            });
            
            setTimeout(() => {
                if (loadedCount === 0) {
                    alert('âš ï¸ Las imÃ¡genes no se estÃ¡n cargando. Verificar symlink: php artisan storage:link');
                }
            }, 2000);
        });
    </script>
</body>
</html>